# Exposes information about the Zsh Line Editor via the $editor_info associative array.
# Clean up previous $editor_info.
unset editor_info
typeset -gA editor_info

if [[ "$KEYMAP" == 'vicmd' ]]; then
  zstyle -s ':zcontrol:module:editor:info:keymap:alternate' format 'REPLY'
  editor_info[keymap]="$REPLY"
else
  zstyle -s ':zcontrol:module:editor:info:keymap:primary' format 'REPLY'
  editor_info[keymap]="$REPLY"

  if [[ "$ZLE_STATE" == *overwrite* ]]; then
    zstyle -s ':zcontrol:module:editor:info:keymap:primary:overwrite' format 'REPLY'
    editor_info[overwrite]="$REPLY"
  else
    zstyle -s ':zcontrol:module:editor:info:keymap:primary:insert' format 'REPLY'
    editor_info[overwrite]="$REPLY"
  fi
fi

unset REPLY

zle reset-prompt
zle -R